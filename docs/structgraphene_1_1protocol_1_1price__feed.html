<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BitShares-Core: graphene::protocol::price_feed Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BitShares-Core
   &#160;<span id="projectnumber">7.0.0</span>
   </div>
   <div id="projectbrief">BitShares blockchain node software and command-line wallet software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegraphene.html">graphene</a></li><li class="navelem"><a class="el" href="namespacegraphene_1_1protocol.html">protocol</a></li><li class="navelem"><a class="el" href="structgraphene_1_1protocol_1_1price__feed.html">price_feed</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="structgraphene_1_1protocol_1_1price__feed-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">graphene::protocol::price_feed Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>defines market parameters for margin positions  
 <a href="structgraphene_1_1protocol_1_1price__feed.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="asset_8hpp_source.html">asset.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for graphene::protocol::price_feed:</div>
<div class="dyncontent">
 <div class="center">
  <img src="structgraphene_1_1protocol_1_1price__feed.png" usemap="#graphene::protocol::price_5Ffeed_map" alt=""/>
  <map id="graphene::protocol::price_5Ffeed_map" name="graphene::protocol::price_5Ffeed_map">
<area href="structgraphene_1_1chain_1_1price__feed__with__icr.html" title="defines market parameters for margin positions, extended with an initial_collateral_ratio field" alt="graphene::chain::price_feed_with_icr" shape="rect" coords="0,56,221,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:affca92dc941ee449f0a2a1c99a3e1473"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgraphene_1_1protocol_1_1price__feed.html#affca92dc941ee449f0a2a1c99a3e1473">validate</a> () const</td></tr>
<tr class="separator:affca92dc941ee449f0a2a1c99a3e1473"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9864f61729920e739c9272b89719273"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgraphene_1_1protocol_1_1price__feed.html#ac9864f61729920e739c9272b89719273">is_for</a> (asset_id_type asset_id) const</td></tr>
<tr class="separator:ac9864f61729920e739c9272b89719273"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6252428604466bc644f3e56ce8353c02"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgraphene_1_1protocol_1_1price.html">price</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgraphene_1_1protocol_1_1price__feed.html#a6252428604466bc644f3e56ce8353c02">settlement_price</a></td></tr>
<tr class="separator:a6252428604466bc644f3e56ce8353c02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6bf318a90269e2e638df9b3cb89504e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgraphene_1_1protocol_1_1price.html">price</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgraphene_1_1protocol_1_1price__feed.html#ae6bf318a90269e2e638df9b3cb89504e">core_exchange_rate</a></td></tr>
<tr class="memdesc:ae6bf318a90269e2e638df9b3cb89504e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Price at which automatically exchanging this asset for CORE from fee pool occurs (used for paying fees)  <a href="structgraphene_1_1protocol_1_1price__feed.html#ae6bf318a90269e2e638df9b3cb89504e">More...</a><br /></td></tr>
<tr class="separator:ae6bf318a90269e2e638df9b3cb89504e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81a886eed9c27f296d4631a885b97c8a"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgraphene_1_1protocol_1_1price__feed.html#a81a886eed9c27f296d4631a885b97c8a">maintenance_collateral_ratio</a> = <a class="el" href="protocol_2include_2graphene_2protocol_2config_8hpp.html#a088a6500f643fafb7334b33bbea0231a">GRAPHENE_DEFAULT_MAINTENANCE_COLLATERAL_RATIO</a></td></tr>
<tr class="separator:a81a886eed9c27f296d4631a885b97c8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afef11ed5832c728c7dec984b0d75e6da"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgraphene_1_1protocol_1_1price__feed.html#afef11ed5832c728c7dec984b0d75e6da">maximum_short_squeeze_ratio</a> = <a class="el" href="protocol_2include_2graphene_2protocol_2config_8hpp.html#ac958a0ef18d1ca306502634fc8946d96">GRAPHENE_DEFAULT_MAX_SHORT_SQUEEZE_RATIO</a></td></tr>
<tr class="separator:afef11ed5832c728c7dec984b0d75e6da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af018fd5a315703a5afcd20fdf287a464"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgraphene_1_1protocol_1_1price.html">price</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgraphene_1_1protocol_1_1price__feed.html#af018fd5a315703a5afcd20fdf287a464">max_short_squeeze_price</a> () const</td></tr>
<tr class="separator:af018fd5a315703a5afcd20fdf287a464"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98463272d7cab66ef4201b261eca5c43"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgraphene_1_1protocol_1_1price.html">price</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgraphene_1_1protocol_1_1price__feed.html#a98463272d7cab66ef4201b261eca5c43">max_short_squeeze_price_before_hf_1270</a> () const</td></tr>
<tr class="separator:a98463272d7cab66ef4201b261eca5c43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea09f66a8c1a41cd77b41e376c8760da"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgraphene_1_1protocol_1_1price.html">price</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgraphene_1_1protocol_1_1price__feed.html#aea09f66a8c1a41cd77b41e376c8760da">margin_call_order_price</a> (const <a class="el" href="classfc_1_1optional.html">fc::optional</a>&lt; uint16_t &gt; &amp;margin_call_fee_ratio) const</td></tr>
<tr class="separator:aea09f66a8c1a41cd77b41e376c8760da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91e6fc8c402647bab588133ce172d3b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacegraphene_1_1protocol.html#a54851df9ea21bef79e7cdb2da2e3e3cc">ratio_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgraphene_1_1protocol_1_1price__feed.html#a91e6fc8c402647bab588133ce172d3b3">margin_call_order_ratio</a> (const <a class="el" href="classfc_1_1optional.html">fc::optional</a>&lt; uint16_t &gt; &amp;margin_call_fee_ratio) const</td></tr>
<tr class="separator:a91e6fc8c402647bab588133ce172d3b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdf72aeccadb7c3a61165f557d7b5b6c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacegraphene_1_1protocol.html#a54851df9ea21bef79e7cdb2da2e3e3cc">ratio_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgraphene_1_1protocol_1_1price__feed.html#abdf72aeccadb7c3a61165f557d7b5b6c">margin_call_pays_ratio</a> (const <a class="el" href="classfc_1_1optional.html">fc::optional</a>&lt; uint16_t &gt; &amp;margin_call_fee_ratio) const</td></tr>
<tr class="separator:abdf72aeccadb7c3a61165f557d7b5b6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30f1e1b7f21c0e198dfae800c4d11273"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgraphene_1_1protocol_1_1price.html">price</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgraphene_1_1protocol_1_1price__feed.html#a30f1e1b7f21c0e198dfae800c4d11273">maintenance_collateralization</a> () const</td></tr>
<tr class="separator:a30f1e1b7f21c0e198dfae800c4d11273"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bdb5d3b180dd7df1ecf147966329a37"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgraphene_1_1protocol_1_1price__feed.html#a0bdb5d3b180dd7df1ecf147966329a37">margin_call_params_equal</a> (const <a class="el" href="structgraphene_1_1protocol_1_1price__feed.html">price_feed</a> &amp;b) const</td></tr>
<tr class="separator:a0bdb5d3b180dd7df1ecf147966329a37"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>defines market parameters for margin positions </p>

<p class="definition">Definition at line <a class="el" href="asset_8hpp_source.html#l00160">160</a> of file <a class="el" href="asset_8hpp_source.html">asset.hpp</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ac9864f61729920e739c9272b89719273"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9864f61729920e739c9272b89719273">&#9670;&nbsp;</a></span>is_for()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool graphene::protocol::price_feed::is_for </td>
          <td>(</td>
          <td class="paramtype">asset_id_type&#160;</td>
          <td class="paramname"><em>asset_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="asset_8cpp_source.html#l00266">266</a> of file <a class="el" href="asset_8cpp_source.html">asset.cpp</a>.</p>

</div>
</div>
<a id="a30f1e1b7f21c0e198dfae800c4d11273"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30f1e1b7f21c0e198dfae800c4d11273">&#9670;&nbsp;</a></span>maintenance_collateralization()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgraphene_1_1protocol_1_1price.html">price</a> graphene::protocol::price_feed::maintenance_collateralization </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Call orders with collateralization (aka collateral/debt) not greater than this value are in margin call territory. Calculation: ~settlement_price * maintenance_collateral_ratio / GRAPHENE_COLLATERAL_RATIO_DENOM </p>

<p class="definition">Definition at line <a class="el" href="asset_8cpp_source.html#l00342">342</a> of file <a class="el" href="asset_8cpp_source.html">asset.cpp</a>.</p>

</div>
</div>
<a id="aea09f66a8c1a41cd77b41e376c8760da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea09f66a8c1a41cd77b41e376c8760da">&#9670;&nbsp;</a></span>margin_call_order_price()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgraphene_1_1protocol_1_1price.html">price</a> graphene::protocol::price_feed::margin_call_order_price </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfc_1_1optional.html">fc::optional</a>&lt; uint16_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>margin_call_fee_ratio</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compute price at which margin calls offer to sell collateral.</p>
<p>Margin calls offer a greater amount of COLLATERAL asset to the market to buy back DEBT asset than would otherwise be required in a fair exchange at the settlement_price. (I.e. they sell collateral "cheaper" than its price feed value.) This is done to attract a quick buyer of the call in order to preserve healthy collateralization of the DEBT asset overall. The price at which the call is offered, in comparison to the settlement price, is determined by the Maximum Short Squeeze Ratio (MSSR) and the Margin Call Fee Ratio (MCFR) as follows, in units of DEBT per COLLATERAL:</p>
<p>MCOP = settlement_price / (MSSR - MCFR)</p>
<p>Compare with Maximum Short Squeeze Price (MSSP), which is computed as follows:</p>
<p>MSSP = settlement_price / MSSR</p>
<p>Since BSIP-74, we distinguish between Maximum Short Squeeze Price (MSSP) and Margin Call Order Price (MCOP). Margin calls previously offered collateral at the MSSP, but now they offer slightly less collateral per debt if Margin Call Fee Ratio (MCFR) is set, because the call order must reserve some collateral to pay the fee. We must still retain the concept of MSSP, as it communicates the minimum collateralization before black swan may be triggered, but we add this new method to calculate MCOP.</p>
<p>Note that when we calculate the MCOP, we enact a price floor to ensure the margin call never offers LESS collateral than the DEBT is worth. As such, it's important to calculate the realized fee, when trading at the offer price, as a delta between total relinquished collateral (DEBT*MSSP) and collateral sold to the buyer (DEBT*MCOP). If you instead try to calculate the fee by direct multiplication of MCFR, you will get the wrong answer if the price was floored. (Fee is truncated when price is floored.)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">margin_call_fee_ratio</td><td>MCFR value currently in effect. If zero or unset, returns same result as <a class="el" href="structgraphene_1_1protocol_1_1price__feed.html#af018fd5a315703a5afcd20fdf287a464">max_short_squeeze_price()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The MCOP in units of DEBT per COLLATERAL. </dd></dl>

<p class="definition">Definition at line <a class="el" href="asset_8cpp_source.html#l00308">308</a> of file <a class="el" href="asset_8cpp_source.html">asset.cpp</a>.</p>

</div>
</div>
<a id="a91e6fc8c402647bab588133ce172d3b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91e6fc8c402647bab588133ce172d3b3">&#9670;&nbsp;</a></span>margin_call_order_ratio()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacegraphene_1_1protocol.html#a54851df9ea21bef79e7cdb2da2e3e3cc">ratio_type</a> graphene::protocol::price_feed::margin_call_order_ratio </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfc_1_1optional.html">fc::optional</a>&lt; uint16_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>margin_call_fee_ratio</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compute the MCOR, the ratio between margin_call_order_price and feed price </p><dl class="section return"><dt>Returns</dt><dd>MSSR - MCFR </dd></dl>

<p class="definition">Definition at line <a class="el" href="asset_8cpp_source.html#l00326">326</a> of file <a class="el" href="asset_8cpp_source.html">asset.cpp</a>.</p>

</div>
</div>
<a id="a0bdb5d3b180dd7df1ecf147966329a37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bdb5d3b180dd7df1ecf147966329a37">&#9670;&nbsp;</a></span>margin_call_params_equal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool graphene::protocol::price_feed::margin_call_params_equal </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structgraphene_1_1protocol_1_1price__feed.html">price_feed</a> &amp;&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Whether the parameters that affect margin calls in this price feed object are the same as the parameters in the passed-in object </p>

<p class="definition">Definition at line <a class="el" href="asset_8hpp_source.html#l00291">291</a> of file <a class="el" href="asset_8hpp_source.html">asset.hpp</a>.</p>

</div>
</div>
<a id="abdf72aeccadb7c3a61165f557d7b5b6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdf72aeccadb7c3a61165f557d7b5b6c">&#9670;&nbsp;</a></span>margin_call_pays_ratio()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacegraphene_1_1protocol.html#a54851df9ea21bef79e7cdb2da2e3e3cc">ratio_type</a> graphene::protocol::price_feed::margin_call_pays_ratio </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfc_1_1optional.html">fc::optional</a>&lt; uint16_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>margin_call_fee_ratio</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ratio between max_short_squeeze_price and margin_call_order_price.</p>
<p>This ratio, if it multiplied margin_call_order_price (expressed in DEBT/COLLATERAL), would yield the max_short_squeeze_price, apart perhaps for truncation (rounding) error.</p>
<p>When a margin call is taker, matching an existing order on the books, it is possible the call gets a better realized price than the order price that it offered at. In this case, the margin call fee is proportionaly reduced. This ratio is used to calculate the price at which the call relinquishes collateral (to meet both trade and fee obligations) based on actual realized match price.</p>
<p>This function enacts the same flooring as <a class="el" href="structgraphene_1_1protocol_1_1price__feed.html#aea09f66a8c1a41cd77b41e376c8760da">margin_call_order_price()</a> (MSSR - MCFR is floored at 1.00). This ensures we apply the same fee truncation in the taker case as the maker case.</p>
<dl class="section return"><dt>Returns</dt><dd>(MSSR - MCFR) / MSSR </dd></dl>

<p class="definition">Definition at line <a class="el" href="asset_8cpp_source.html#l00334">334</a> of file <a class="el" href="asset_8cpp_source.html">asset.cpp</a>.</p>

</div>
</div>
<a id="af018fd5a315703a5afcd20fdf287a464"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af018fd5a315703a5afcd20fdf287a464">&#9670;&nbsp;</a></span>max_short_squeeze_price()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgraphene_1_1protocol_1_1price.html">price</a> graphene::protocol::price_feed::max_short_squeeze_price </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is the price at which a call order will relinquish COLLATERAL when margin called. It is also the price that establishes the minimum amount of collateral per debt that call orders must maintain to avoid possibility of black swan. A call order maintaining less collateral per debt than this price is unable to meet the combined obligation to sell collateral at the Margin Call Offer Price (MCOP) <em>AND</em> to pay the margin call fee. The MSSP is related to the MCOP, but the MSSP accounts for the need to reserve extra collateral to pay the margin call fee, whereas the MCOP only accounts for the collateral to be traded to the call buyer. Prior to the introduction of the Margin Call Fee Ratio (MCFR) with BSIP-74, the two prices (MSSP and MCOP) were identical, and MSSP could be thought of as "the price at which you are forced to sell
collateral if margin called," but this latter concept is now embodied by the MCOP.</p>
<p>The Maximum Short Squeeze Price is computed as follows, in units of DEBT per COLLATERAL:</p>
<p>MSSP = settlement_price / MSSR</p>
<dl class="section return"><dt>Returns</dt><dd>The MSSP in units of DEBT per COLLATERAL. </dd></dl>

<p class="definition">Definition at line <a class="el" href="asset_8cpp_source.html#l00300">300</a> of file <a class="el" href="asset_8cpp_source.html">asset.cpp</a>.</p>

</div>
</div>
<a id="a98463272d7cab66ef4201b261eca5c43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98463272d7cab66ef4201b261eca5c43">&#9670;&nbsp;</a></span>max_short_squeeze_price_before_hf_1270()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgraphene_1_1protocol_1_1price.html">price</a> graphene::protocol::price_feed::max_short_squeeze_price_before_hf_1270 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Older implementation of <a class="el" href="structgraphene_1_1protocol_1_1price__feed.html#af018fd5a315703a5afcd20fdf287a464">max_short_squeeze_price()</a> due to hardfork changes. It came with the following commentary:</p>
<p>When selling collateral to pay off debt, the least amount of debt to receive should be min_usd = <a class="el" href="structgraphene_1_1protocol_1_1price__feed.html#af018fd5a315703a5afcd20fdf287a464">max_short_squeeze_price()</a> * collateral</p>
<p>This is provided to ensure that a black swan cannot be trigged due to poor liquidity alone, it must be confirmed by having the <a class="el" href="structgraphene_1_1protocol_1_1price__feed.html#af018fd5a315703a5afcd20fdf287a464">max_short_squeeze_price()</a> move below the black swan price. </p><dl class="section return"><dt>Returns</dt><dd>the Maximum Short Squeeze price for this asset </dd></dl>

<p class="definition">Definition at line <a class="el" href="asset_8cpp_source.html#l00282">282</a> of file <a class="el" href="asset_8cpp_source.html">asset.cpp</a>.</p>

</div>
</div>
<a id="affca92dc941ee449f0a2a1c99a3e1473"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affca92dc941ee449f0a2a1c99a3e1473">&#9670;&nbsp;</a></span>validate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void graphene::protocol::price_feed::validate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="asset_8cpp_source.html#l00251">251</a> of file <a class="el" href="asset_8cpp_source.html">asset.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ae6bf318a90269e2e638df9b3cb89504e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6bf318a90269e2e638df9b3cb89504e">&#9670;&nbsp;</a></span>core_exchange_rate</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgraphene_1_1protocol_1_1price.html">price</a> graphene::protocol::price_feed::core_exchange_rate</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Price at which automatically exchanging this asset for CORE from fee pool occurs (used for paying fees) </p>

<p class="definition">Definition at line <a class="el" href="asset_8hpp_source.html#l00183">183</a> of file <a class="el" href="asset_8hpp_source.html">asset.hpp</a>.</p>

</div>
</div>
<a id="a81a886eed9c27f296d4631a885b97c8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81a886eed9c27f296d4631a885b97c8a">&#9670;&nbsp;</a></span>maintenance_collateral_ratio</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t graphene::protocol::price_feed::maintenance_collateral_ratio = <a class="el" href="protocol_2include_2graphene_2protocol_2config_8hpp.html#a088a6500f643fafb7334b33bbea0231a">GRAPHENE_DEFAULT_MAINTENANCE_COLLATERAL_RATIO</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Fixed point between 1.000 and 10.000, implied fixed point denominator is GRAPHENE_COLLATERAL_RATIO_DENOM </p>

<p class="definition">Definition at line <a class="el" href="asset_8hpp_source.html#l00186">186</a> of file <a class="el" href="asset_8hpp_source.html">asset.hpp</a>.</p>

</div>
</div>
<a id="afef11ed5832c728c7dec984b0d75e6da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afef11ed5832c728c7dec984b0d75e6da">&#9670;&nbsp;</a></span>maximum_short_squeeze_ratio</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t graphene::protocol::price_feed::maximum_short_squeeze_ratio = <a class="el" href="protocol_2include_2graphene_2protocol_2config_8hpp.html#ac958a0ef18d1ca306502634fc8946d96">GRAPHENE_DEFAULT_MAX_SHORT_SQUEEZE_RATIO</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Fixed point between 1.000 and 10.000, implied fixed point denominator is GRAPHENE_COLLATERAL_RATIO_DENOM </p>

<p class="definition">Definition at line <a class="el" href="asset_8hpp_source.html#l00189">189</a> of file <a class="el" href="asset_8hpp_source.html">asset.hpp</a>.</p>

</div>
</div>
<a id="a6252428604466bc644f3e56ce8353c02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6252428604466bc644f3e56ce8353c02">&#9670;&nbsp;</a></span>settlement_price</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgraphene_1_1protocol_1_1price.html">price</a> graphene::protocol::price_feed::settlement_price</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Required maintenance collateral is defined as a fixed point number with a maximum value of 10.000 and a minimum value of 1.000. (denominated in GRAPHENE_COLLATERAL_RATIO_DENOM)</p>
<p>A black swan event occurs when value_of_collateral equals value_of_debt * MSSR. To avoid a black swan a margin call is executed when value_of_debt * required_maintenance_collateral equals value_of_collateral using rate.</p>
<p>Default requirement is $1.75 of collateral per $1 of debt</p>
<p>BlackSwan &mdash;&gt; SQR &mdash;&gt; MCR -&mdash;&gt; SP Forced settlements will evaluate using this price, defined as BITASSET / COLLATERAL </p>

<p class="definition">Definition at line <a class="el" href="asset_8hpp_source.html#l00180">180</a> of file <a class="el" href="asset_8hpp_source.html">asset.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>libraries/protocol/include/graphene/protocol/<a class="el" href="asset_8hpp_source.html">asset.hpp</a></li>
<li>libraries/protocol/<a class="el" href="asset_8cpp_source.html">asset.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Sep 26 2023 06:17:00 for BitShares-Core by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
